<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Case Study • Netflix Clone</title>
  <meta name="description" content="A responsive Netflix clone built with React + TMDB API, deployed on GitHub Pages." />

  <style>
    /* -------------------------------
       MATCHES YOUR PORTFOLIO THEME
       8px SPACE SYSTEM · PREMIUM UI
    ------------------------------- */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --space-1: 0.5rem;
      --space-2: 1rem;
      --space-3: 1.5rem;
      --space-4: 2rem;
      --space-5: 2.5rem;
      --space-6: 3rem;
      --space-7: 4rem;
      --space-8: 5rem;

      --radius-lg: 1.75rem;
      --radius-md: 1.25rem;
      --radius-sm: 0.75rem;

      --transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
      --shadow-sm: 0 8px 20px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 16px 32px -8px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 24px 48px -12px rgba(0, 0, 0, 0.4);
      --border-subtle: 1px solid rgba(255, 255, 255, 0.06);
    }

    [data-theme="dark"] {
      --bg-primary: #0a0a0c;
      --bg-secondary: #111216;
      --bg-card: rgba(18, 20, 25, 0.7);
      --bg-card-solid: #14171c;
      --bg-nav: rgba(10, 10, 12, 0.85);

      --text-primary: #ffffff;
      --text-secondary: #b0b3b8;
      --text-tertiary: #7e828a;

      --accent: #9b87f8;
      --accent-soft: rgba(155, 135, 248, 0.15);

      --border-color: rgba(255, 255, 255, 0.07);
      --chip-bg: rgba(255, 255, 255, 0.05);
      --shadow-color: rgba(0, 0, 0, 0.6);

      --noise-opacity: 0.02;
      --glow: 0 0 0 1px rgba(155, 135, 248, 0.2);
    }

    [data-theme="light"] {
      --bg-primary: #f5f7fa;
      --bg-secondary: #ffffff;
      --bg-card: rgba(255, 255, 255, 0.7);
      --bg-card-solid: #ffffff;
      --bg-nav: rgba(255, 255, 255, 0.8);

      --text-primary: #0b0c0e;
      --text-secondary: #2e3238;
      --text-tertiary: #5b5f66;

      --accent: #6b4ee0;
      --accent-soft: rgba(107, 78, 224, 0.08);

      --border-color: rgba(0, 0, 0, 0.06);
      --chip-bg: rgba(0, 0, 0, 0.04);
      --shadow-color: rgba(0, 0, 0, 0.05);

      --noise-opacity: 0.025;
      --glow: 0 0 0 1px rgba(107, 78, 224, 0.15);
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Plus Jakarta Sans', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      font-weight: 400;
      font-size: 1rem;
      letter-spacing: -0.01em;
      transition: background-color 0.2s, color 0.2s;
      position: relative;
    }

    /* soft noise overlay (same as your site) */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-image: url('data:image/svg+xml,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.04"/></svg>');
      opacity: var(--noise-opacity);
      pointer-events: none;
      z-index: 1000;
      mix-blend-mode: overlay;
    }

    .gradient-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at 80% 20%, rgba(155, 135, 248, 0.05) 0%, transparent 50%),
                  radial-gradient(circle at 20% 80%, rgba(155, 135, 248, 0.03) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .container {
      width: 100%;
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 var(--space-3);
    }

    section { padding: var(--space-5) 0; }

    /* NAV (same style) */
    nav {
      position: sticky;
      top: 0;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      background-color: var(--bg-nav);
      border-bottom: var(--border-subtle);
      z-index: 100;
      padding: var(--space-2) 0;
      transition: var(--transition);
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: var(--space-2);
    }

    .logo {
      font-weight: 700;
      font-size: 1.125rem;
      letter-spacing: -0.02em;
      background: var(--accent);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      white-space: nowrap;
    }

    .nav-actions {
      display: flex;
      gap: var(--space-2);
      flex-wrap: wrap;
      align-items: center;
      justify-content: flex-end;
    }

    .theme-toggle, .btn {
      background: var(--chip-bg);
      border: var(--border-subtle);
      border-radius: 40px;
      padding: 0.55rem 1.1rem;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.85rem;
      cursor: pointer;
      backdrop-filter: blur(4px);
      transition: var(--transition);
      white-space: nowrap;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid var(--border-color);
    }

    .btn-primary {
      background: var(--accent);
      color: white;
      border: none;
    }

    .btn:hover {
      transform: scale(0.98);
      box-shadow: var(--shadow-md);
    }
    .theme-toggle:hover { background: var(--accent-soft); }

    /* CARDS (same as your bento/project cards) */
    .bento-card {
      background: var(--bg-card);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      box-shadow: var(--shadow-sm), var(--glow);
      transition: var(--transition);
      border: 1px solid var(--border-color);
    }
    .bento-card:hover {
      background: var(--bg-card-solid);
      transform: translateY(-6px);
      box-shadow: var(--shadow-md);
      border-color: rgba(155, 135, 248, 0.3);
    }

    .chip {
      display: inline-block;
      background: var(--chip-bg);
      padding: 0.35rem 1rem;
      border-radius: 40px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: -0.01em;
      color: var(--text-secondary);
      border: 1px solid var(--border-color);
      white-space: nowrap;
    }

    /* PAGE LAYOUT */
    .page {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-3);
      padding: var(--space-4) 0 var(--space-6);
    }

    .hero {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .hero h1 {
      font-size: clamp(2.2rem, 8vw, 4rem);
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: var(--space-1);
    }

    .hero p {
      font-size: 1.1rem;
      color: var(--text-secondary);
      margin-bottom: var(--space-2);
    }

    .meta-row {
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .cta-group {
      display: flex;
      gap: var(--space-2);
      flex-wrap: wrap;
      align-items: center;
      margin-top: var(--space-1);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-2);
      margin-top: var(--space-2);
    }

    .stat {
      padding: var(--space-3);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      background: var(--chip-bg);
    }
    .stat b { display: block; font-size: 1.1rem; letter-spacing: -0.02em; }
    .stat span { color: var(--text-tertiary); font-size: 0.85rem; }

    /* CONTENT + TOC */
    .layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-3);
      align-items: start;
    }

    .toc {
      display: none;
      position: sticky;
      top: 90px;
      padding: var(--space-3);
    }

    .toc h3 {
      font-size: 0.8rem;
      color: var(--text-tertiary);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: var(--space-2);
    }

    .toc a {
      display: block;
      padding: 0.65rem 0.9rem;
      border-radius: 16px;
      color: var(--text-secondary);
      border: 1px solid transparent;
      transition: var(--transition);
      margin-bottom: 0.35rem;
      text-decoration: none;
    }
    .toc a:hover {
      color: var(--text-primary);
      background: var(--accent-soft);
      border-color: rgba(155,135,248,0.22);
    }
    .toc a.active {
      color: var(--text-primary);
      background: var(--accent-soft);
      border-color: rgba(155,135,248,0.32);
    }

    .toc-mobile {
      padding: var(--space-3);
    }
    .toc-mobile select {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 40px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      color: var(--text-primary);
      outline: none;
      backdrop-filter: blur(10px);
    }

    .block h2 {
      font-size: 1.1rem;
      letter-spacing: -0.02em;
      margin-bottom: var(--space-1);
    }
    .sub {
      color: var(--text-secondary);
      font-size: 0.95rem;
      margin-bottom: var(--space-2);
    }

    .two {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-3);
    }

    .list { padding-left: 1.1rem; color: var(--text-secondary); }
    .list li { margin: 0.4rem 0; }

    .tagrow { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: var(--space-2); }
    .tag {
      background: var(--accent-soft);
      padding: 0.2rem 0.8rem;
      border-radius: 30px;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--accent);
      border: 1px solid rgba(155,135,248,0.2);
      white-space: nowrap;
    }

    .timeline {
      display: grid;
      gap: var(--space-2);
      margin-top: var(--space-2);
    }

    .timeline-item {
      display: flex;
      gap: var(--space-2);
      border-left: 2px solid var(--accent);
      padding-left: var(--space-3);
    }
    .timeline-item b { display:block; }
    .timeline-item p { color: var(--text-secondary); font-size: 0.95rem; }

    .gallery {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-2);
      margin-top: var(--space-2);
    }
    .shot {
      height: 150px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-color);
      background: radial-gradient(circle at top right, rgba(155,135,248,0.12), transparent);
      display: grid;
      place-items: center;
      color: var(--text-tertiary);
      text-align: center;
      padding: var(--space-3);
    }

    details {
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: var(--space-3);
      background: var(--bg-card);
      backdrop-filter: blur(10px);
    }
    details + details { margin-top: var(--space-2); }
    summary { cursor: pointer; font-weight: 700; }
    details p { margin-top: var(--space-2); color: var(--text-secondary); }

    .navfoot {
      display: flex;
      justify-content: space-between;
      gap: var(--space-2);
      flex-wrap: wrap;
      align-items: center;
    }

    /* TABLET */
    @media (min-width: 640px) {
      .container { padding: 0 var(--space-4); }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
      .two { grid-template-columns: 1fr 1fr; }
      .gallery { grid-template-columns: repeat(2, 1fr); }
    }

    /* DESKTOP */
    @media (min-width: 1024px) {
      .container { padding: 0 var(--space-5); }
      section { padding: var(--space-7) 0; }
      .layout { grid-template-columns: 320px 1fr; }
      .toc { display: block; }
      .toc-mobile { display: none; }
      .stats-grid { grid-template-columns: repeat(4, 1fr); }
      .gallery { grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>

<body>
  <div class="gradient-bg" aria-hidden="true"></div>

  <script>
    const CASE = {
      projectName: "Netflix Clone (React + TMDB)",
      role: "Frontend • React.js",
      type: "Personal Project",
      duration: "3–7 Days",
      year: "2026",
      overview:
        "A responsive Netflix clone built with React.js that fetches real-time movie data from the TMDB API. Includes categorized rows, dynamic banners, and a clean component structure. Deployed on GitHub Pages.",
      links: {
        backToPortfolio: "index.html",
        live: "https://aaswne.github.io/Netflix-Clone/",
        repo: "" // add GitHub repo link if you want
      },
      stats: [
        { label: "API", value: "TMDB" },
        { label: "Framework", value: "React" },
        { label: "Build", value: "Vite" },
        { label: "Deploy", value: "GitHub Pages" }
      ],
      problem: [
        "Build a Netflix-like UI that feels smooth on all devices.",
        "Fetch real-time movie data and render multiple categories efficiently.",
        "Keep code organized with reusable components and clean API handling."
      ],
      goals: [
        "Responsive layout (mobile, tablet, desktop)",
        "Real-time movie data using TMDB API",
        "Reusable component architecture",
        "Deploy a live link using GitHub Pages"
      ],
      strategy: [
        "Split UI into reusable components (NavBar, Banner, RowPost).",
        "Centralize API requests/constants for clean data fetching.",
        "Render categories as horizontal rows with poster interactions.",
        "Deploy using GitHub Pages with correct base path settings."
      ],
      timeline: [
        { title: "Step 1 • Layout", desc: "Created NavBar, Banner, and row structure." },
        { title: "Step 2 • API Integration", desc: "Fetched categories from TMDB and rendered posters." },
        { title: "Step 3 • Responsiveness", desc: "Polished spacing, scroll UX, and mobile layout." },
        { title: "Step 4 • Deployment", desc: "Built + deployed to GitHub Pages and verified production build." }
      ],
      tools: ["React.js", "Vite", "Axios", "TMDB API", "GitHub Pages", "CSS"],
      results: [
        "Netflix-style UI working smoothly with categorized movie rows.",
        "Movies load dynamically from TMDB across multiple sections.",
        "Live deployment completed and accessible via shareable URL."
      ],
      learnings: [
        "Reusable components make it easy to scale categories/rows.",
        "Keeping all endpoints in one config file avoids duplication.",
        "GitHub Pages deployment needs correct base path handling."
      ],
      galleryPlaceholders: [
        "Desktop Home UI",
        "Mobile Responsive View",
        "Banner Section",
        "Row Scroll Interaction"
      ],
      faq: [
        { q: "Where does the movie data come from?", a: "From the TMDB API (The Movie Database). The app fetches real-time movie lists per category." },
        { q: "Is this a full-stack project?", a: "This is mainly frontend + API integration. The backend is TMDB, which provides the data." },
        { q: "Can you add search or authentication?", a: "Yes. Search can be added using TMDB search endpoints. Auth can be added using Firebase/Auth0." }
      ]
    };
  </script>

  <!-- NAV -->
  <nav>
    <div class="container nav-container">
      <div class="logo" id="logoText">Case Study</div>

      <div class="nav-actions">
        <a class="btn" id="backBtn" href="index.html">← Back</a>
        <a class="btn btn-primary" id="liveBtn" href="#" target="_blank" rel="noopener" style="display:none;">Live</a>
        <a class="btn" id="repoBtn" href="#" target="_blank" rel="noopener" style="display:none;">Repo</a>
        <button class="theme-toggle" id="themeBtn" type="button">Theme</button>
      </div>
    </div>
  </nav>

  <main class="container">
    <div class="page">
      <!-- HERO -->
      <section class="bento-card hero" id="top">
        <div class="meta-row">
          <span class="chip" id="chipRole"></span>
          <span class="chip" id="chipType"></span>
          <span class="chip" id="chipDuration"></span>
          <span class="chip" id="chipYear"></span>
        </div>

        <div>
          <h1 id="title"></h1>
          <p id="overview"></p>

          <div class="cta-group">
            <a class="btn btn-primary" href="#results">See Results</a>
            <a class="btn" href="#strategy">Strategy</a>
            <a class="btn" href="#execution">Execution</a>
          </div>

          <div class="stats-grid" id="stats"></div>
        </div>

        <div class="bento-card toc-mobile">
          <select id="tocSelect" aria-label="Jump to section">
            <option value="#overview-section">Overview</option>
            <option value="#problem">Problem</option>
            <option value="#goals">Goals</option>
            <option value="#strategy">Strategy</option>
            <option value="#execution">Execution</option>
            <option value="#tools">Tools</option>
            <option value="#results">Results</option>
            <option value="#learnings">Learnings</option>
            <option value="#gallery">Gallery</option>
            <option value="#faq">FAQ</option>
          </select>
        </div>
      </section>

      <!-- LAYOUT -->
      <section class="layout">
        <!-- DESKTOP TOC -->
        <aside class="bento-card toc" aria-label="Table of contents">
          <h3>On this page</h3>
          <a href="#overview-section" class="toc-link">Overview</a>
          <a href="#problem" class="toc-link">Problem</a>
          <a href="#goals" class="toc-link">Goals</a>
          <a href="#strategy" class="toc-link">Strategy</a>
          <a href="#execution" class="toc-link">Execution</a>
          <a href="#tools" class="toc-link">Tools</a>
          <a href="#results" class="toc-link">Results</a>
          <a href="#learnings" class="toc-link">Learnings</a>
          <a href="#gallery" class="toc-link">Gallery</a>
          <a href="#faq" class="toc-link">FAQ</a>
        </aside>

        <!-- CONTENT -->
        <div style="display:grid; gap: var(--space-3);">
          <div class="bento-card block" id="overview-section">
            <h2>Overview</h2>
            <p class="sub">What this project is, what you built, and the key outcomes.</p>
            <div class="two">
              <div>
                <b>What I built</b>
                <ul class="list" style="margin-top: var(--space-2);">
                  <li>Netflix-style UI (NavBar + Banner + category rows)</li>
                  <li>TMDB API integration for real-time movie lists</li>
                  <li>Responsive layout across devices</li>
                  <li>Deployed live on GitHub Pages</li>
                </ul>
              </div>
              <div>
                <b>Tools</b>
                <div class="tagrow" id="toolTags"></div>
              </div>
            </div>
          </div>

          <div class="bento-card block" id="problem">
            <h2>The Problem</h2>
            <p class="sub">Challenges and requirements.</p>
            <ul class="list" id="problemList"></ul>
          </div>

          <div class="bento-card block" id="goals">
            <h2>Goals</h2>
            <p class="sub">What “done well” looks like.</p>
            <ul class="list" id="goalsList"></ul>
          </div>

          <div class="bento-card block" id="strategy">
            <h2>Strategy</h2>
            <p class="sub">How the solution was planned.</p>
            <ul class="list" id="strategyList"></ul>
          </div>

          <div class="bento-card block" id="execution">
            <h2>Execution</h2>
            <p class="sub">Timeline of building, testing, and shipping.</p>
            <div class="timeline" id="timeline"></div>
          </div>

          <div class="bento-card block" id="tools">
            <h2>Tools & Stack</h2>
            <p class="sub">Tools used to build and deploy.</p>
            <div class="tagrow" id="toolsRow"></div>
          </div>

          <div class="bento-card block" id="results">
            <h2>Results</h2>
            <p class="sub">What was achieved.</p>
            <ul class="list" id="resultsList"></ul>
          </div>

          <div class="bento-card block" id="learnings">
            <h2>Key Learnings</h2>
            <p class="sub">What you’ll apply next time.</p>
            <ul class="list" id="learningsList"></ul>
          </div>

          <div class="bento-card block" id="gallery">
            <h2>Gallery</h2>
            <p class="sub">Add screenshots of desktop + mobile views.</p>
            <div class="gallery" id="galleryGrid"></div>
          </div>

          <div class="bento-card block" id="faq">
            <h2>FAQ</h2>
            <p class="sub">Quick answers for recruiters.</p>
            <div id="faqWrap"></div>
          </div>

          <div class="bento-card navfoot">
            <a class="btn" href="#top">↑ Top</a>
            <a class="btn btn-primary" id="openLive2" href="#" target="_blank" rel="noopener">Open Live →</a>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const $ = (s) => document.querySelector(s);

    // Fill top
    $("#logoText").textContent = CASE.projectName;
    $("#title").textContent = CASE.projectName;
    $("#overview").textContent = CASE.overview;

    $("#chipRole").textContent = CASE.role;
    $("#chipType").textContent = CASE.type;
    $("#chipDuration").textContent = `Duration: ${CASE.duration}`;
    $("#chipYear").textContent = `Year: ${CASE.year}`;

    $("#backBtn").href = CASE.links.backToPortfolio || "index.html";

    if (CASE.links.live) {
      $("#liveBtn").style.display = "inline-flex";
      $("#liveBtn").href = CASE.links.live;
      $("#openLive2").href = CASE.links.live;
    } else {
      $("#openLive2").style.display = "none";
    }

    if (CASE.links.repo) {
      $("#repoBtn").style.display = "inline-flex";
      $("#repoBtn").href = CASE.links.repo;
    }

    // Stats
    const statsWrap = $("#stats");
    CASE.stats.forEach((s) => {
      const div = document.createElement("div");
      div.className = "stat";
      div.innerHTML = `<b>${s.value}</b><span>${s.label}</span>`;
      statsWrap.appendChild(div);
    });

    // Lists
    const fillList = (id, arr) => {
      const ul = $(id);
      ul.innerHTML = "";
      arr.forEach((t) => {
        const li = document.createElement("li");
        li.textContent = t;
        ul.appendChild(li);
      });
    };

    fillList("#problemList", CASE.problem);
    fillList("#goalsList", CASE.goals);
    fillList("#strategyList", CASE.strategy);
    fillList("#resultsList", CASE.results);
    fillList("#learningsList", CASE.learnings);

    // Timeline
    const tl = $("#timeline");
    tl.innerHTML = "";
    CASE.timeline.forEach((x) => {
      const row = document.createElement("div");
      row.className = "timeline-item";
      row.innerHTML = `<div><b>${x.title}</b><p>${x.desc}</p></div>`;
      tl.appendChild(row);
    });

    // Tags
    const toolTags = $("#toolTags");
    const toolsRow = $("#toolsRow");
    CASE.tools.forEach((t, i) => {
      const tag = document.createElement("span");
      tag.className = "tag";
      tag.textContent = t;
      toolsRow.appendChild(tag);

      if (i < 4) {
        const tag2 = document.createElement("span");
        tag2.className = "tag";
        tag2.textContent = t;
        toolTags.appendChild(tag2);
      }
    });

    // Gallery placeholders
    const gg = $("#galleryGrid");
    CASE.galleryPlaceholders.forEach((txt) => {
      const box = document.createElement("div");
      box.className = "shot";
      box.textContent = txt + "\n(Replace with image later)";
      gg.appendChild(box);
    });

    // FAQ
    const fw = $("#faqWrap");
    CASE.faq.forEach((f) => {
      const d = document.createElement("details");
      d.innerHTML = `<summary>${f.q}</summary><p>${f.a}</p>`;
      fw.appendChild(d);
    });

    // Mobile TOC
    $("#tocSelect").addEventListener("change", (e) => {
      if (e.target.value) location.hash = e.target.value;
    });

    // Theme toggle (same key across your site)
    const THEME_KEY = "aswin_portfolio_theme";
    const root = document.documentElement;

    const applyTheme = (theme) => {
      root.setAttribute("data-theme", theme);
      $("#themeBtn").textContent = theme === "light" ? "Dark" : "Light";
    };

    const saved = localStorage.getItem(THEME_KEY);
    if (saved === "light" || saved === "dark") applyTheme(saved);
    else applyTheme(root.getAttribute("data-theme") || "dark");

    $("#themeBtn").addEventListener("click", () => {
      const current = root.getAttribute("data-theme") || "dark";
      const next = current === "dark" ? "light" : "dark";
      localStorage.setItem(THEME_KEY, next);
      applyTheme(next);
    });

    // TOC active state
    const tocLinks = Array.from(document.querySelectorAll(".toc-link"));
    const sections = tocLinks.map(a => document.querySelector(a.getAttribute("href"))).filter(Boolean);

    const onScroll = () => {
      const y = window.scrollY + 140;
      let activeId = sections[0]?.id;

      for (const sec of sections) {
        if (sec.offsetTop <= y) activeId = sec.id;
      }

      tocLinks.forEach(a => {
        const id = a.getAttribute("href").replace("#", "");
        a.classList.toggle("active", id === activeId);
      });
    };

    window.addEventListener("scroll", onScroll, { passive: true });
    onScroll();
  </script>
</body>
</html>
